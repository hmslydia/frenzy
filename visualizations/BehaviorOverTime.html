<html>
<head>
<script src="http://code.jquery.com/jquery-latest.min.js"
        type="text/javascript"></script>
<script src="../saved/dataJonathanCaitlinDepsteinPilotNature.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="visualization-utils.js"></script>
</head>

<body>
<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
</body>


<script>
/* Plots individual user's behavior over time. */

var users = ["caitbon", "jb", "Awesomesauce99"]
var color1 = ["#D94436", "#D94436", "#D94436"]// var color1 = ["#458C6B", "#D94436", "#D9A86C"]
var color2 = ["#458C6B", "#458C6B", "#458C6B"]
var color3 = ["#D9A86C", "#D9A86C", "#D9A86C"]

var series = getSeries(studyData, users, color1, extractTimes);

function display (series) {
        $('#container').highcharts({
            chart: {
                type: 'scatter'
            },
		    legend: {
		        enabled: false
		    },
		    tooltip: {
		        enabled: false
		    },
            title: {
                text: 'Behavior of participants over time'
            },
            subtitle: {
                text: 'Each dot indicates one behavior (tag, search, or conversation)'
            },
            xAxis: {
                type: 'datetime',
				title: { text: 'Minutes elapsed'},
		        dateTimeLabelFormats: {
		            second: '%M',
					minute: '%M',
					hour: ' ',
					day: ' ',
					week: ' ',
					month: ' ',
					year: ' '
		        }
            },
            yAxis: {
                title: {
                    text: ''
                },
				labels: {
				    formatter: function() {
				        return users[this.value - 1];
				    }
				},
        		tickInterval: 1,
				min:0,
				max:4,
				showFirstLabel:false,
				showLastLabel:false
            },
            tooltip: {
                formatter: function() {
                        return '<b>'+ this.series.name +'</b><br/>'+
                        Highcharts.dateFormat('%e. %b', this.x) +': '+ this.y +' m';
                }
            },
            
            series: series
        });
 }

function foo(){
	var checked = $("#variables input:checked")

	var series = [];

	var ids = ["tags", "searches", "conversations"]
	var functions = [extractTimes, extractSearches, extractConversations]
	var colors = [color1, color2, color3]

	for(var i in ids){
		if($('#' + ids[i]).is(":checked")){
			var data = getSeries(studyData, users, colors[i], functions[i])
			series = series.concat(data)
		}
	}
	display(series);	
}
    
</script>
<div>
<form action="#" id="variables">
<div><input type="checkbox" id="tags" onclick="foo()"></input>Tags<span class="legend" style="color:#D94436">&#8226;</span></div>
<div><input type="checkbox" id="searches" onclick="foo()"></input>Searches<span class="legend" style="color:#458C6B">&#8226;</span></div>
<div><input type="checkbox" id="conversations" onclick="foo()"></input>Conversations<span class="legend" style="color:#D9A86C">&#8226;</span></div>
</div>


<style>
.legend {
	font-size:37px;
}

div div{
    display: block;
    padding:4px 2px;
}
</style>


<script>
display(series);
$('#tags').prop('checked', true);
</script>
</form>

</html>
